# Amazon DynamoDB

```
+----------------------------------------------------------+
|                     Amazon DynamoDB                      |
|  +----------------------------------------------------+  |
|  |                      Table                         |  |
|  |  +----------------------------------------------+  |  |
|  |  |  Partition Key (PK)  |  Sort Key (SK) [opt]  |  |  |
|  |  +----------------------------------------------+  |  |
|  |  |              Attributes (schemaless)         |  |  |
|  |  +----------------------------------------------+  |  |
|  |  +------------------+  +----------------------+    |  |
|  |  |       GSI        |  |         LSI          |    |  |
|  |  +------------------+  +----------------------+    |  |
|  +----------------------------------------------------+  |
+----------------------------------------------------------+
```

## Overview
- キーバリュー DB:            ==フルマネージド== / ==サーバーレス== / ==ミリ秒レイテンシー==
  - Key:
    - `Partition Key (PK)`:     ==必須== / ハッシュ関数でパーティション決定
    - `Sort Key (SK)`:          オプション / PK + SK で複合キー / 範囲クエリ可能
  - Capacity:
    - `On-Demand`:              ==自動スケーリング== / 予測不可能なワークロード向け / ==従量課金==
    - `Provisioned`:            ==RCU/WCU を事前設定== / 予測可能なワークロード向け / ==Auto Scaling 可==
      - RCU:                  1 RCU = 4KB/秒 (強い整合性) / 8KB/秒 (結果整合性)
      - WCU:                  1 WCU = 1KB/秒
  - Index:
    - `GSI`:                    ==別の PK/SK== でクエリ / ==テーブル作成後も追加可== / 独自の RCU/WCU
    - `LSI`:                    ==同じ PK, 別の SK== / ==テーブル作成時のみ== / テーブルの RCU/WCU 共有
  - Consistency:
    - `Eventually Consistent`:  デフォルト / 低レイテンシー / ==0.5 RCU==
    - `Strongly Consistent`:    ==最新データ保証== / ==1 RCU==
  - `DynamoDB Streams`:         変更をキャプチャ / ==Lambda トリガー== / 24時間保持
  - `Global Tables`:            ==Global に分散== / マルチリージョン / アクティブ-アクティブ / 自動レプリケーション
  - `DAX`:                      ==DynamoDB 専用インメモリキャッシュ== / マイクロ秒レイテンシー / 読み取り負荷軽減

## Options
- `TTL`:                        自動削除 / 追加コストなし
- `Point-in-Time Recovery`:     ==35日間== / 秒単位で復元可能
- `Transactions`:               複数項目の ACID 操作
