# Amazon Aurora

```
┌──────────────────────────────────────────┐
│             Aurora Cluster               │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐   │
│  │   AZ-a  │  │   AZ-b  │  │   AZ-c  │   │
│  │ ┌─────┐ │  │ ┌─────┐ │  │ ┌─────┐ │   │
│  │ │Copy1│ │  │ │Copy3│ │  │ │Copy5│ │   │
│  │ │Copy2│ │  │ │Copy4│ │  │ │Copy6│ │   │
│  │ └─────┘ │  │ └─────┘ │  │ └─────┘ │   │
│  └─────────┘  └─────────┘  └─────────┘   │
│           3 AZ に 6 コピー (自動)        │
└──────────────────────────────────────────┘
```

## Overview
- AWS 独自の RDB:             ==MySQL 5倍 / PostgreSQL 3倍== のパフォーマンス / 高可用性 / ==自動スケーリング==
  - Replica:                  Max ==15台== (RDS: 5台) / Failover: ==30秒未満== (RDS: 60-120秒) / Reader Endpoint で自動負荷分散
  - `Aurora Global Database`:   ==クロスリージョン== / レプリケーション遅延: ==1秒未満== / DR 時のフェイルオーバー: ==1分未満==
  - `Aurora Serverless`:        スケーリング (負荷に応じて==自動でキャパシティ調整==) / ==!使用した分だけ課金== (ACU 単位)
  - `Aurora Auto Scaling`:
    - 対象:                   ==リードレプリカの数==を自動調整
    - トリガー:               CloudWatch メトリクス (CPU使用率、接続数等)
    - 範囲:                   最小〜最大レプリカ数を設定
    - ユースケース:           読み取り負荷の変動が大きいワークロード
  - `ストアドプロシージャ`:
    - Lambda 統合:            ストアドプロシージャから ==Lambda を呼び出し可能==
      - ユースケース:         DB イベント時に外部 API 呼び出し、通知送信、データ連携
      - 設定:                 IAM ロール + VPC 設定が必要
    - ネイティブ関数:         `lambda_sync()` (同期) / `lambda_async()` (非同期)
