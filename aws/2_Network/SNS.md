# Amazon SNS (Simple Notification Service)

- `Amazon SNS`                              フルマネージド Pub/Sub メッセージング / ==プッシュ型== / 複数サブスクライバーへ通知

## Overview

- **定義**: フルマネージドの==Pub/Sub==メッセージングサービス
- **特徴**:
  - ==プッシュ型== (パブリッシャーがメッセージを配信)
  - 1つのメッセージを==複数のサブスクライバー==に配信
  - ==Topic== を中心としたアーキテクチャ

---

## Topic タイプ

| 項目 | ==Standard Topic== | ==FIFO Topic== |
|------|-------------------|----------------|
| **スループット** | ほぼ無制限 | 300 msg/秒 |
| **順序** | ベストエフォート | ==厳密な順序保証== |
| **配信** | 少なくとも1回 | ==正確に1回== |
| **サブスクライバー** | 全プロトコル対応 | ==SQS FIFO のみ== |

---

## サブスクリプションプロトコル

| プロトコル | ユースケース |
|-----------|-------------|
| ==SQS== | キューに配信 (Fan-out) |
| ==Lambda== | サーバーレス処理 |
| ==HTTP/HTTPS== | Webhook |
| ==Email== | メール通知 |
| ==SMS== | ショートメッセージ |

---

## 連携パターン (SAA 頻出)

### SNS + SQS (Fan-out)
```
                    +---> SQS Queue A ---> Consumer A
SNS Topic ----+---> SQS Queue B ---> Consumer B
                    +---> SQS Queue C ---> Consumer C
```
- 1つのメッセージを==複数のキューに配信==
- 各コンシューマーが==独立して処理==

### SNS + Lambda
- SNS がトリガーとなり Lambda を起動
- イベント駆動アーキテクチャ

### S3 → SNS
- S3 イベント通知の送信先として SNS を指定

---

## SQS vs SNS

| 項目 | ==SQS== | ==SNS== |
|------|---------|---------|
| **モデル** | ==プル型== (ポーリング) | ==プッシュ型== |
| **配信先** | 1つのコンシューマー | ==複数のサブスクライバー== |
| **メッセージ保持** | 最大14日 | ==保持しない== (即時配信) |
| **ユースケース** | 非同期処理、デカップリング | 通知、Fan-out |

---

## SAA 出題パターン

1. 「1つのイベントを==複数のシステム==に通知したい」
   → ==SNS==

2. 「==Fan-out== パターンで複数キューに配信したい」
   → ==SNS + SQS==

3. 「S3 にファイルがアップロードされたら==通知==したい」
   → ==S3 Event → SNS==

4. 「メッセージを==保持せず==即時配信したい」
   → ==SNS== (SQS ではない)

5. 「==プッシュ型==で配信したい」
   → ==SNS==
