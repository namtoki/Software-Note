# Amazon Aurora

```
┌──────────────────────────────────────────┐
│             Aurora Cluster               │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐   │
│  │   AZ-a  │  │   AZ-b  │  │   AZ-c  │   │
│  │ ┌─────┐ │  │ ┌─────┐ │  │ ┌─────┐ │   │
│  │ │Copy1│ │  │ │Copy3│ │  │ │Copy5│ │   │
│  │ │Copy2│ │  │ │Copy4│ │  │ │Copy6│ │   │
│  │ └─────┘ │  │ └─────┘ │  │ └─────┘ │   │
│  └─────────┘  └─────────┘  └─────────┘   │
│           3 AZ に 6 コピー (自動)        │
└──────────────────────────────────────────┘
```

## Associate Level
- AWS 独自の RDB:             ==MySQL 5倍 / PostgreSQL 3倍== のパフォーマンス / 高可用性 / ==自動スケーリング==
  - Replica:
    | 項目 | 説明 |
    |------|------|
    | **最大数** | ==15台== (RDS は 5台) |
    | **フェイルオーバー** | ==30秒未満== (RDS は 60-120秒) |
    | **エンドポイント** | Reader エンドポイントで==自動負荷分散== |
  - `Aurora Global Database`:   ==クロスリージョン== / レプリケーション遅延: ==1秒未満== / DR 時のフェイルオーバー: ==1分未満==
    ```txt
    Primary Region          Secondary Region(s)
    ┌──────────────┐        ┌──────────────┐
    │ Primary DB   │ ─1秒─> │  Replica DB  │
    │ (Read/Write) │  未満  │  (Read Only) │
    └──────────────┘        └──────────────┘
    ```
  - `Aurora Serverless`:
    | 項目 | 説明 |
    |------|------|
    | **スケーリング** | 負荷に応じて==自動でキャパシティ調整== |
    | **課金** | ==使用した分だけ== (ACU 単位) |
    | **ユースケース** | ==間欠的==なワークロード、開発/テスト環境 |
  - `ストアドプロシージャ`:
    - Lambda 統合:                 ストアドプロシージャから ==Lambda を呼び出し可能==
      - ユースケース:              DB イベント時に外部 API 呼び出し、通知送信、データ連携
      - 設定:                      IAM ロール + VPC 設定が必要
    - ネイティブ関数:              `lambda_sync()` (同期) / `lambda_async()` (非同期)
